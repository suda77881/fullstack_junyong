■ Bank

◎1. 시스템개요
프로젝트명 : Bank Management System
목적      : 사용자 계좌 관리 기능을 제공하는 콘솔기반 은행 시스템
기능      : 계좌생성, 입금, 출금, 계좌삭제, 로그인
기술스택   :
- 사용언어 : Java
- 설계패턴 : MVC
- UML
특징      : 객체지향 원칙준수, 확장성 높은 구조


◎2. 클래스 구조 설명
- MVC (Model, View, Controller)
1. 유저정보모델 : <<class>> UserInfo
    - 사용자 계좌정보를 저장하는 데이터 모델
    - String id, String pass, double balance
    - List<UserInfo> users;

2. 기능 : 인터페이스 & 클래스
인터페이스 : 공통동작
    <<interface>> BankController { exec(ArrayList<UserInfo> user); }

구현클래스
    Login, Add, Deposit, widthdraw, Delete

3. 메인컨트롤러 
<<class>> Bank_Main
멤버변수 : ArrayList<UserInfo> users , BankController controller
멤버함수 : menu () , main()



◎3. UML 클래스 다이어그램
Bank_Main → UserInfo <연관관계>
Bank_Main → BankController  <의존관계>
BankController ← Login, Add, Deposit, Withdraw, Delete    <실체화관계>

<<interface>> BankController
...△  ...△ ...△     ...△     ...△
Login, Add, Deposit, Withdraw, Delete

Bank_Main → UserInfo <연관관계> 실선 화살표 - 멤버변수로 포함
Bank_Main → BankController  <의존관계> 점선화살표 - 인터페이스를 일시적으로 사용, 
                                                 Login, Add 교체해서 사용


참고 1)
※ 연관관계  : 어떤 역할 수행(long)         - 실선 화살표
※ 의존관계  :             (short)        - 점선 화살표
※ 실체화관계 : 인터페이스와 구현클래스 - 속이빈화살표 점선 - can do this

※ 일반화관계 : 상속                 - 속이빈화살표 실선 - is a
※ 집합관계   : 합성관계 - 생성자에서 new -  ◆
              집약관계 - 생성자에서 참조 - ◇


참조)             연관관계  읜존관계
<<Driver>> ――――> <<Car>> ― ― ― ― > <<GasPump>>


class Driver{
    private Car car; // 멤버변수 - 연관관계
    public void fillGas(GasPump p ) {p.getGas(amount);} // 연산의 인자(참조값)  - 의존관계
}

```
java

◎4. 기능흐름도 or 시퀀스다이어그램
1. 메뉴판 번호입력받기
2. 번호가 1이라면 유저추가 {유저추가 Add}
3. 번호가 2,3,4,5번이라면 - 로그인 / 각각의 기능
4. 번호가 9라면 종료

◎5. 확장가능성 
```
  

Arraylist 



interface BankController = implements를 이용해서 추상 메서드를 상속받고 오버라이드를 통해 자식 클래스들에 기능연결

UserInfo = Add 클래스를 통해 id와 pass, balance 를 각각 입력받고 각정보들을 private화 하여 getter setter를 이용해 정보 수정 및 저장

Bank_Main 각 기능들을 메뉴를 통해 연결하고, 리턴값을 통해 진입여부를 결정?

Add 아이디를 추가하고 리턴값 find를 반환 이게 인덱스 값이 됨

Show 계좌를 조회하고 정보를 출력

Delete 계좌를 조회하고 사용자 입력 (Y또는 X)를 받고 계좌를 삭제처리 ArrayList에서 .remove(인덱스) 기능을 이용해서 삭제

Withdraw 인덱스 번호로 balance 멤버변수에 접근하여 사용자가 입력한 금액을 계좌의 잔액에서 차감처리 getter, setter ? 혹은 remove 처리하고 다시 add처리할지도

Deposit 인덱스 번호로 balance 멤버변수에 접근하여 사용자가 입력한 금액을 계좌의 잔액에서 증가처리 getter, setter ? 혹은 remove 처리하고 다시 add처리할지도 

Login 인덱스 번호로 배열에서 아이디와 패스워드를 찾고 사용자가 입력한 아이디, 비밀번호와 일치여부에 따라 로그인 기능을 실행하고 다음 부터 생략시킴(로그아웃 또는 프로그램 종료시점까지)

각클래스에 오버라이드된 기능 exec가 존재하며 파라미터값이 (List <









멤버변수는 상수 , 멤버함수는 추상화메서드

추상화 interface
배열의 단점을 보완하고 자온 동적 배열이다.

list의 특징은 index가 있고, 중복

메서드의 종류는 add(추가), get(값얻기), remove(삭제), contains(참거짓), size(길이)

        Object
           ↑
        Vehicle
       ↑       ↑
MotorCycle  Car



class Driver{

void drive(Vehicle v){

	v.run();

}

}



List <String> colors = new ArrayList<String>(3);

colors.add("red");
colors.add("green");
colors.add("blue");

System.out.print(colors)


```
package com.company.bank005_interface;

import java.util.ArrayList;
import java.util.List;
import java.util.Scanner;

public class Bank_Main {
	// 멤버변수
	private List <UserInfo> users;	// add, get, size, remove, contains
	private BankController [] controller;
	
	
	public List<UserInfo> getUsers() { return users; } public void setUsers(List<UserInfo> users) { this.users = users; } public BankController[] getController() { return controller; } 
	public void setController(BankController[] controller) { this.controller = controller; }
	public Bank_Main() { 
		users		= new ArrayList<>();	
		controller  = new BankController[]{
				new Login() , new Add(), new Show(),
			//        0           1          2     
				new Deposit(), new Withdraw(), new Delete()
				//    3               4               5
		};
	}
	// 멤버함수	(메뉴판)
	public void menu() {
		//변수
		
		//입력 + 처리
			// 1. 유저추가
			// 2,3,4,5,
			// 1) Login 2) 2,3,4,5 각각에서 처리해야할일
			//	각각의 기능 2 SHow(),  3. Deposit  4. Withdraw, 5. Delete()
		
		
//		while(!(num == 9)){
//			
//		}
		int num =-1;
		Scanner sc = new Scanner(System.in);
		while ((!(num == 9))) {
			num = -1;
			System.out.println(
					"메뉴를 선택해주세요 > \n[1] 계좌 추가 \n[2] 계좌 조회 \n[3] 입금하기 \n[4] 출금하기 \n[5] 계좌 삭제");
			num = sc.nextInt();
			int find=1; // 찾은 유저번호 or 0 로그인 1 계좌추가
			
			//add, get(번호), size, remove(번호), contatins()
			//추가         :
			// 1번 호출 : controller[1].exec(users, 1); > users.add(new UserInfo("id", "pw" , 1));
			// 2번 로그인해서 해당유저가 번호 필요 : exec(users, index);
			// 3번 controller[2].exec(users, index); 		users.get(번호); 	/users.remove(번호);
			// 조회 : users.get(번호)
			// 입금 : users.get(번호) / user.setBalance(입금받은돈)
			// 삭제 : users.remove(번호)
			
			switch(num) {
			
			case 1: {
//				System.out.println("계좌 추가 기능입니다.");
				controller[num].exec(users, 0);}break;
			case 2 : case 3: case 4 : case 5: {
				
				// add, get(번호), size, remove(번호), contatins()
				// Add		: users.add(	new UserInfo("id", "pw", 1) );
				// Show		: users.get(유저번호)
				// Desposit : users.get(유저번호)
				//1. parameter	- 넘겨받아야할 데이터 users, 유저번호
				//2. 리턴값 		- 위의 사용법에서 show, deposit 부분등에서 유저번호가 필요한다.
				//				  로그인시 찾은 유저의 번호를 넘겨주려고.
				//3. int (찾은 유저번호) 	exec(users, index);

//				if(num>=2 && num <= 4) {controller[0].exec(users);}
				
				controller[0].exec(users, 0);

				
				switch(num) {
				
				case 2: {controller[num].exec(users, find);}break;
				case 3: {controller[num].exec(users, find);}break;
				case 4: {controller[num].exec(users, find);}break;
				case 5: {controller[num].exec(users, find);}break;
				
				}
				
			}break;	// login or menu
			
			default : {System.out.println("잘못된 입력입니다.");}continue;
					
			
			}// 1 or another 
			
		}// while end
		System.out.println("EXIT");
		
//		if (num == 1) {
//			System.out.println("계좌 추가 기능입니다.");
//	    
//		}
//		else {controller[num-1].exec();}
		
//	    Q1. 무한반복 + 각번호 입력받으면 ~ 기능입니다. 출력
//	    Q2. 입력받은 번호가 1번이면 유저추가
//	    Q2. 입력받은 번호가 2,3,4,5 이면
//	    		1) Login
//				2) 2,3,4,5 각각에서 처리해야할일

	}	// menu end

	public static void main(String[] args) {
		new Bank_Main().menu();

	}

}

```


```

package com.company.bank005_interface;


public class UserInfo {
	
	private String id;
	private String pass;
	private double balance;
	

	public UserInfo(String id, String pass, double balance) {
		super();
		this.id = id;
		this.pass = pass;
		this.balance = balance;
	}
	@Override
	public String toString() {
		return "UserInfo [Id=" + id + ", Pass=" + pass + ", balance=" + balance + "]";
	}
	public String getId() {
		return id;
	}
	public void setId(String id) {
		this.id = id;
	}
	public String getPass() {
		return pass;
	}
	public void setPass(String pass) {
		this.pass = pass;
	}
	public double getBalance() {
		return balance;
	}
	public void setBalance(double balance) {
		this.balance = balance;
	}

	

}

```


```
package com.company.bank005_interface;

import java.util.List;
import java.util.Scanner;

public class Login implements BankController {
	

	
	@Override
	public int exec(List<UserInfo> users, int find) {
//		System.out.println(users);
		Scanner sc = new Scanner(System.in);
		
//		if (find != 0) {
		System.out.println("[1]아이디를 입력해주세요 >"); String tempId = sc.next();
		System.out.println("[2]비밀번호를 입력해주세요 >"); String tempPass = sc.next();
		//처리 - users에서 아이디와 비밀번호가 맞는 유저번호 찾기 - 찾았으면 나오기 / 못찾았으면 -1
		// 내가입력받은 아이디와 유저1번째 users.get(0)의 아이디 , 0번이 유저번호
		for(int i=0; i<users.size(); i++) {
		if (tempId.equals(users.get(i).getId()) && tempPass.equals(users.get(i).getPass())){
			System.out.println("로그인성공");
			return i;
			}
		};
		System.out.println("로그인실패");
		return -1;
		
		
//		if (users.getId().equals(tempId) && UserInfo.getPass().equals(tempPass)) {
//			
//			System.out.println("로그인 성공");return 1;
//		}
//		else {System.out.println("로그인 실패"); return 0;}}
//		else {return 1;}
//		
//		return users.size();
		
	
//		
		
		
	}




}

```


```
package com.company.bank005_interface;


import java.util.List;
import java.util.Scanner;

public class Add implements BankController {
	

	
	@Override
	public int exec(List<UserInfo> users, int find) {
		

		Scanner sc = new Scanner(System.in);
		System.out.print("\n사용하실 아이디를 입력해주세요 > ");  
		String id = sc.next();
		System.out.print("\n사용하실 비밀번호를 입력해주세요 > "); 
		String pass = sc.next();
		System.out.print("\n입금할 금액 > "); 
		Double balance = sc.nextDouble();
		
		users.add(new UserInfo(id,pass,balance));
		
//		System.out.println("배열번호" + users.size()); //1
		
		System.out.println("아이디 추가완료");
		
		return users.size();

	}

}

```

```
package com.company.bank005_interface;

import java.util.List;
import java.util.Scanner;

public class Deposit implements BankController {

	




	@Override
	public int exec(List<UserInfo> users, int find) {
		Scanner sc = new Scanner(System.in); 
		System.out.println("입금하실 금액 입력"); double money = sc.nextDouble();
		
//		for (int i = 0; i<users.size(); i++) {
//		if (users.get(i).getBalance() >= 1) {
			UserInfo u = users.get(find);
		    u.setBalance(u.getBalance() + money) ;
		    System.out.println("입금이 완료되었습니다." + u);
//			};
//			}
		
		return 1;
		
	}
}

```

```
package com.company.bank005_interface;

import java.util.List;
import java.util.Scanner;

public class Delete implements BankController {


	@Override
	public int exec(List<UserInfo> users, int find) {
//		System.out.println("계좌 삭제 기능입니다.");
		Scanner sc = new Scanner(System.in);
		System.out.println("삭제하시겠습니까?"); char ch = sc.next().charAt(0);
		if (ch == 'y' || ch == 'Y') {users.remove(find);}
		
		UserInfo u = users.remove(find);
		System.out.println("정보를 삭제했습니다. > " + u);
		return 1;
		
	}

	
	
	
}

```


```
package com.company.bank005_interface;

import java.util.List;
import java.util.Scanner;

public class Withdraw implements BankController {

	@Override
	public int exec(List<UserInfo> users, int find) {
//		System.out.println("출금하기 기능입니다.");
		
		// 변수
		Scanner sc = new Scanner(System.in);
		// 입력 - 사용자한테 입금할 금액입력받기
		System.out.println("출금할 금액을 입력해주세요 >"); double balance = sc.nextDouble();

		
		// 처리
		UserInfo u = users.get(find);
		u.setBalance(u.getBalance() - balance);
		// 출력
		return 0;
		
//		Scanner sc = new Scanner(System.in);
//		System.out.println("출금하실 금액 입력"); double money = sc.nextDouble();
//		
//		UserInfo u = users.get(find);
//	    u.setbalance(u.getBalance() - money) ;
//	    System.out.println("출금이 완료되었습니다." + u);
//		
//		return 1;
//		
	}



	
	
}

```



```
package com.company.bank005_interface;

import java.util.List;

public class Show implements BankController {

	@Override
	public int exec(List<UserInfo> users, int find) {
//		System.out.println("입금하기 기능입니다.");
		
		UserInfo info = users.get(find);
		System.out.println(" ID      > " + info.getId());
		System.out.println(" PASS    > " + info.getPass());
		System.out.println(" BALANCE > " + info.getBalance());
		
		
		return 1;
		
	}



}

```


```
package com.company.bank005_interface;

import java.util.List;

public interface BankController {
	
	     int exec(List<UserInfo> users, int find);





}

```